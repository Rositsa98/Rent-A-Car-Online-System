{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/admin/Documents/4 \\u043A\\u0443\\u0440\\u0441/JS/PROJECT/JS_PROJECT/react-app/rent-a-car-react/rent-a-car-react/src/components/login/LoginComponent.js\";\nimport React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Link } from \"react-router-dom\";\nimport userService from \"../../service/user.service\";\nimport loginImage from \"../../assets/images/login-image.png\";\nimport { Redirect } from \"react-router-dom\";\n\nconst {\n  config\n} = require(\"../../config/config\");\n\nconst APIURL = \"http://localhost:3000\"; //config.apiUrl;\n\nclass LoginComponent extends Component {\n  constructor(props) {\n    super(props); //console.log('about to reset login status');\n    // reset login status\n    //this.props.logout();\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      isSubmitted: false\n    };\n    console.log(\"reset login status\");\n    this.handleChange = this.handleChange.bind(this);\n    this.login = this.login.bind(this);\n  }\n\n  handleChange(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  login() {\n    this.state.isSubmitted = true;\n    console.log(this.state);\n    const {\n      email,\n      password\n    } = this.state;\n\n    if (email && password) {\n      console.log(`email ${email} and  ${password} logged in`);\n      userService.login(email, password).then(user => {\n        console.log(user);\n        return /*#__PURE__*/_jsxDEV(Redirect, {\n          to: APIURL + \"/index\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 18\n        }, this);\n      }, error => {\n        console.log(\"ERROR\" + error);\n\n        /*#__PURE__*/\n        _jsxDEV(Redirect, {\n          to: APIURL + \"/login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this);\n      });\n    }\n  }\n\n  render() {\n    const {\n      email,\n      password,\n      isSubmitted\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \" Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"loginImg\",\n          src: loginImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"loginForm\",\n          onSubmit: this.login,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              children: \"Email: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Email\",\n              name: \"email\",\n              value: email,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              children: \"Password: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Password\",\n              name: \"password\",\n              value: password,\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group-btns\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: this.login,\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/register\",\n              className: \"btn btn-link\",\n              children: \"Register\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default LoginComponent;","map":{"version":3,"sources":["/home/admin/Documents/4 курс/JS/PROJECT/JS_PROJECT/react-app/rent-a-car-react/rent-a-car-react/src/components/login/LoginComponent.js"],"names":["React","Component","render","Link","userService","loginImage","Redirect","config","require","APIURL","LoginComponent","constructor","props","state","email","password","isSubmitted","console","log","handleChange","bind","login","e","name","value","target","setState","then","user","error"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAuB,WAAvB;AACA,SAASC,IAAT,QAAqB,kBAArB;AAEA,OAAOC,WAAP,MAAwB,4BAAxB;AAEA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,SAASC,QAAT,QAAyB,kBAAzB;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAaC,OAAO,CAAC,qBAAD,CAA1B;;AAEA,MAAMC,MAAM,GAAG,uBAAf,C,CAAwC;;AAExC,MAAMC,cAAN,SAA6BT,SAA7B,CAAuC;AAOrCU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN,EADiB,CAGjB;AACA;AACA;;AALiB,SANnBC,KAMmB,GANX;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,QAAQ,EAAE,EAFJ;AAGNC,MAAAA,WAAW,EAAE;AAHP,KAMW;AAMjBC,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AAEA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWD,IAAX,CAAgB,IAAhB,CAAb;AACD;;AAEDD,EAAAA,YAAY,CAACG,CAAD,EAAI;AACd,UAAM;AAAEC,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAkBF,CAAC,CAACG,MAA1B;AACA,SAAKC,QAAL,CAAc;AAAE,OAACH,IAAD,GAAQC;AAAV,KAAd;AACD;;AAEDH,EAAAA,KAAK,GAAG;AACN,SAAKR,KAAL,CAAWG,WAAX,GAAyB,IAAzB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAjB;AACA,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAsB,KAAKF,KAAjC;;AAEA,QAAIC,KAAK,IAAIC,QAAb,EAAuB;AACrBE,MAAAA,OAAO,CAACC,GAAR,CAAa,SAAQJ,KAAM,SAAQC,QAAS,YAA5C;AACAX,MAAAA,WAAW,CAACiB,KAAZ,CAAkBP,KAAlB,EAAyBC,QAAzB,EAAmCY,IAAnC,CACGC,IAAD,IAAU;AACRX,QAAAA,OAAO,CAACC,GAAR,CAAYU,IAAZ;AACA,4BAAO,QAAC,QAAD;AAAU,UAAA,EAAE,EAAEnB,MAAM,GAAG;AAAvB;AAAA;AAAA;AAAA;AAAA,gBAAP;AACD,OAJH,EAKGoB,KAAD,IAAW;AACTZ,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAUW,KAAtB;;AACA;AAAA,gBAAC,QAAD;AAAU,UAAA,EAAE,EAAEpB,MAAM,GAAG;AAAvB;AAAA;AAAA;AAAA;AAAA;AACD,OARH;AAUD;AACF;;AAEDP,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEY,MAAAA,KAAF;AAASC,MAAAA,QAAT;AAAmBC,MAAAA;AAAnB,QAAmC,KAAKH,KAA9C;AAEA,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,UAAf;AAA0B,UAAA,GAAG,EAAER;AAA/B;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAM,UAAA,SAAS,EAAC,WAAhB;AAA4B,UAAA,QAAQ,EAAE,KAAKgB,KAA3C;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACE;AAAO,cAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AACE,cAAA,IAAI,EAAC,MADP;AAEE,cAAA,WAAW,EAAC,OAFd;AAGE,cAAA,IAAI,EAAC,OAHP;AAIE,cAAA,KAAK,EAAEP,KAJT;AAKE,cAAA,QAAQ,EAAE,KAAKK;AALjB;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAWE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACE;AAAO,cAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AACE,cAAA,IAAI,EAAC,UADP;AAEE,cAAA,WAAW,EAAC,UAFd;AAGE,cAAA,IAAI,EAAC,UAHP;AAIE,cAAA,KAAK,EAAEJ,QAJT;AAKE,cAAA,QAAQ,EAAE,KAAKI;AALjB;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXF,eAqBE;AAAK,YAAA,SAAS,EAAC,iBAAf;AAAA,oCACE;AAAQ,cAAA,SAAS,EAAC,iBAAlB;AAAoC,cAAA,OAAO,EAAE,KAAKE,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE,QAAC,IAAD;AAAM,cAAA,EAAE,EAAC,WAAT;AAAqB,cAAA,SAAS,EAAC,cAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBArBF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAsCD;;AArFoC;;AAwFvC,eAAeX,cAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { render } from \"react-dom\";\nimport { Link } from \"react-router-dom\";\n\nimport userService from \"../../service/user.service\";\n\nimport loginImage from \"../../assets/images/login-image.png\";\nimport { Redirect } from \"react-router-dom\";\nconst { config } = require(\"../../config/config\");\n\nconst APIURL = \"http://localhost:3000\"; //config.apiUrl;\n\nclass LoginComponent extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    isSubmitted: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    //console.log('about to reset login status');\n    // reset login status\n    //this.props.logout();\n    console.log(\"reset login status\");\n\n    this.handleChange = this.handleChange.bind(this);\n    this.login = this.login.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n\n  login() {\n    this.state.isSubmitted = true;\n    console.log(this.state);\n    const { email, password } = this.state;\n\n    if (email && password) {\n      console.log(`email ${email} and  ${password} logged in`);\n      userService.login(email, password).then(\n        (user) => {\n          console.log(user);\n          return <Redirect to={APIURL + \"/index\"} />;\n        },\n        (error) => {\n          console.log(\"ERROR\" + error);\n          <Redirect to={APIURL + \"/login\"} />;\n        }\n      );\n    }\n  }\n\n  render() {\n    const { email, password, isSubmitted } = this.state;\n\n    return (\n      <div className=\"login-page\">\n        <h2> Login </h2>\n        <div>\n          <img className=\"loginImg\" src={loginImage}></img>\n          <form className=\"loginForm\" onSubmit={this.login}>\n            <div className=\"form-group\">\n              <label htmlFor=\"email\">Email: </label>\n              <input\n                type=\"text\"\n                placeholder=\"Email\"\n                name=\"email\"\n                value={email}\n                onChange={this.handleChange}\n              />\n            </div>\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">Password: </label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleChange}\n              />\n            </div>\n            <div className=\"form-group-btns\">\n              <button className=\"btn btn-primary\" onClick={this.login}>\n                Login\n              </button>\n              <Link to=\"/register\" className=\"btn btn-link\">\n                Register\n              </Link>\n            </div>\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LoginComponent;\n"]},"metadata":{},"sourceType":"module"}